import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('ğŸŒ± Starting seed...');

  // ============================================
  // A) LANGUAGES
  // ============================================
  console.log('ğŸ“š Seeding languages...');

  const languageEn = await prisma.language.upsert({
    where: { code: 'en' },
    update: {},
    create: {
      code: 'en',
      name: 'English',
      isActive: true,
    },
  });

  const languageGu = await prisma.language.upsert({
    where: { code: 'gu' },
    update: {},
    create: {
      code: 'gu',
      name: 'Gujarati',
      isActive: true,
    },
  });

  const languageHi = await prisma.language.upsert({
    where: { code: 'hi' },
    update: {},
    create: {
      code: 'hi',
      name: 'Hindi',
      isActive: true,
    },
  });

  console.log(`âœ“ Languages: ${languageEn.code}, ${languageGu.code}, ${languageHi.code}`);

  // ============================================
  // B) TAG TYPES
  // ============================================
  console.log('ğŸ·ï¸  Seeding tag types...');

  const tagTypeGoal = await prisma.tagType.upsert({
    where: { code: 'goal' },
    update: {},
    create: {
      code: 'goal',
      label: 'Goal',
    },
  });

  const tagTypeStyle = await prisma.tagType.upsert({
    where: { code: 'style' },
    update: {},
    create: {
      code: 'style',
      label: 'Style',
    },
  });

  const tagTypeDurationBucket = await prisma.tagType.upsert({
    where: { code: 'duration_bucket' },
    update: {},
    create: {
      code: 'duration_bucket',
      label: 'Duration Bucket',
    },
  });

  const tagTypeLevel = await prisma.tagType.upsert({
    where: { code: 'level' },
    update: {},
    create: {
      code: 'level',
      label: 'Level',
    },
  });

  const tagTypeFocusArea = await prisma.tagType.upsert({
    where: { code: 'focus_area' },
    update: {},
    create: {
      code: 'focus_area',
      label: 'Focus Area',
    },
  });

  const tagTypeContraindication = await prisma.tagType.upsert({
    where: { code: 'contraindication' },
    update: {},
    create: {
      code: 'contraindication',
      label: 'Contraindication',
    },
  });

  const tagTypeSubCategory = await prisma.tagType.upsert({
    where: { code: 'sub_category' },
    update: {},
    create: {
      code: 'sub_category',
      label: 'Sub Category',
    },
  });

  // NEW: Wellness Focus and Wellness Goal tag types (for onboarding)
  const tagTypeWellnessFocus = await prisma.tagType.upsert({
    where: { code: 'wellness_focus' },
    update: {},
    create: {
      code: 'wellness_focus',
      label: 'Wellness Focus',
    },
  });

  const tagTypeWellnessGoal = await prisma.tagType.upsert({
    where: { code: 'wellness_goal' },
    update: {},
    create: {
      code: 'wellness_goal',
      label: 'Wellness Goal',
    },
  });

  console.log('âœ“ Tag types created');

  // ============================================
  // C) TAGS (for content filtering)
  // ============================================
  console.log('ğŸ”– Seeding content tags...');

  // Goals (for video/program tagging)
  const tagBackPain = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeGoal.id, code: 'back_pain' } },
    update: {},
    create: {
      tagTypeId: tagTypeGoal.id,
      code: 'back_pain',
      label: 'Back Pain',
      isActive: true,
    },
  });

  const tagStressRelief = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeGoal.id, code: 'stress_relief' } },
    update: {},
    create: {
      tagTypeId: tagTypeGoal.id,
      code: 'stress_relief',
      label: 'Stress Relief',
      isActive: true,
    },
  });

  // Focus Area (for video/program tagging - RENAMED to avoid conflict with wellness_focus)
  const tagHealthSupportArea = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeFocusArea.id, code: 'health_support_area' } },
    update: {},
    create: {
      tagTypeId: tagTypeFocusArea.id,
      code: 'health_support_area',
      label: 'Health Support',
      isActive: true,
    },
  });

  // Level
  const tagBeginner = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeLevel.id, code: 'beginner' } },
    update: {},
    create: {
      tagTypeId: tagTypeLevel.id,
      code: 'beginner',
      label: 'Beginner',
      isActive: true,
    },
  });

  // Duration Buckets
  const tagDuration5to7 = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeDurationBucket.id, code: '5_7_min' } },
    update: {},
    create: {
      tagTypeId: tagTypeDurationBucket.id,
      code: '5_7_min',
      label: '5-7 min',
      isActive: true,
    },
  });

  const tagDuration12to20 = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeDurationBucket.id, code: '12_20_min' } },
    update: {},
    create: {
      tagTypeId: tagTypeDurationBucket.id,
      code: '12_20_min',
      label: '12-20 min',
      isActive: true,
    },
  });

  // Style
  const tagHatha = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeStyle.id, code: 'hatha' } },
    update: {},
    create: {
      tagTypeId: tagTypeStyle.id,
      code: 'hatha',
      label: 'Hatha',
      isActive: true,
    },
  });

  // Sub Category
  const tagWarmUp = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeSubCategory.id, code: 'warmup' } },
    update: {},
    create: {
      tagTypeId: tagTypeSubCategory.id,
      code: 'warmup',
      label: 'WarmUp',
      isActive: true,
    },
  });

  const tagMainPractice = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeSubCategory.id, code: 'main_practice' } },
    update: {},
    create: {
      tagTypeId: tagTypeSubCategory.id,
      code: 'main_practice',
      label: 'MainPractice',
      isActive: true,
    },
  });

  console.log('âœ“ Content tags created');

  // ============================================
  // C2) WELLNESS FOCUS (Onboarding Master Data)
  // ============================================
  console.log('ğŸ¯ Seeding wellness focus & goals...');

  // 1. Health Support
  const wfHealthSupport = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessFocus.id, code: 'health_support' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessFocus.id,
      code: 'health_support',
      label: 'Health Support',
      sortOrder: 1,
      isActive: true,
    },
  });

  // Health Support Goals (6 goals)
  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'reduce_back_pain' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'reduce_back_pain_posture',
      label: 'Reduce Back Pain & Improve Posture',
      parentTagId: wfHealthSupport.id,
      sortOrder: 1,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'manage_diabetes_lifestyle_yoga' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'manage_diabetes_lifestyle_yoga',
      label: 'Manage Diabetes with Lifestyle Yoga',
      parentTagId: wfHealthSupport.id,
      sortOrder: 2,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'support_weight_loss_obesity' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'support_weight_loss_obesity',
      label: 'Support Weight Loss / Obesity',
      parentTagId: wfHealthSupport.id,
      sortOrder: 3,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'improve_sleep_reduce_insomnia' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'improve_sleep_reduce_insomnia',
      label: 'Improve Sleep & Reduce Insomnia',
      parentTagId: wfHealthSupport.id,
      sortOrder: 4,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'relieve_stress_anxiety' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'relieve_stress_anxiety',
      label: 'Relieve Stress & Anxiety',
      parentTagId: wfHealthSupport.id,
      sortOrder: 5,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'increase_flexibility_mobility' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'increase_flexibility_mobility',
      label: 'Increase Flexibility & Mobility',
      parentTagId: wfHealthSupport.id,
      sortOrder: 6,
      isActive: true,
    },
  });

  // 2. Lifestyle & Habits
  const wfLifestyleHabits = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessFocus.id, code: 'lifestyle_habits' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessFocus.id,
      code: 'lifestyle_habits',
      label: 'Lifestyle & Habits',
      sortOrder: 2,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'sleep_better_wake_refreshed' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'sleep_better_wake_refreshed',
      label: 'Sleep Better, Wake Refreshed',
      parentTagId: wfLifestyleHabits.id,
      sortOrder: 1,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'build_consistent_exercise_habits' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'build_consistent_exercise_habits',
      label: 'Build Consistent Exercise Habits',
      parentTagId: wfLifestyleHabits.id,
      sortOrder: 2,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'lose_weight_healthy_way' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'lose_weight_healthy_way',
      label: 'Lose Weight in a Healthy Way',
      parentTagId: wfLifestyleHabits.id,
      sortOrder: 3,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'gain_more_daily_energy' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'gain_more_daily_energy',
      label: 'Gain More Daily Energy',
      parentTagId: wfLifestyleHabits.id,
      sortOrder: 4,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'tone_strengthen_body' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'tone_strengthen_body',
      label: 'Tone & Strengthen My Body',
      parentTagId: wfLifestyleHabits.id,
      sortOrder: 5,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'build_calmer_healthier_lifestyle' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'build_calmer_healthier_lifestyle',
      label: 'Build a Calmer, Healthier Lifestyle',
      parentTagId: wfLifestyleHabits.id,
      sortOrder: 6,
      isActive: true,
    },
  });

  // 3. Fitness & Flexibility
  const wfFitnessFlexibility = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessFocus.id, code: 'fitness_flexibility' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessFocus.id,
      code: 'fitness_flexibility',
      label: 'Fitness & Flexibility',
      sortOrder: 3,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'strengthen_core_back_shoulders' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'strengthen_core_back_shoulders',
      label: 'Strengthen Core, Back & Shoulders',
      parentTagId: wfFitnessFlexibility.id,
      sortOrder: 1,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'improve_overall_flexibility_mobility' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'improve_overall_flexibility_mobility',
      label: 'Improve Overall Flexibility & Mobility',
      parentTagId: wfFitnessFlexibility.id,
      sortOrder: 2,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'boost_stamina_endurance' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'boost_stamina_endurance',
      label: 'Boost Stamina & Endurance',
      parentTagId: wfFitnessFlexibility.id,
      sortOrder: 3,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'toned_sculpted_body' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'toned_sculpted_body',
      label: 'Achieve a Toned & Sculpted Body',
      parentTagId: wfFitnessFlexibility.id,
      sortOrder: 4,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'improve_balance_stability' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'improve_balance_stability',
      label: 'Improve Balance & Stability',
      parentTagId: wfFitnessFlexibility.id,
      sortOrder: 5,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'enhance_breathing_better_workouts' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'enhance_breathing_better_workouts',
      label: 'Enhance Breathing for Better Workouts',
      parentTagId: wfFitnessFlexibility.id,
      sortOrder: 6,
      isActive: true,
    },
  });

  // 4. Beginners & Mindfulness
  const wfBeginnersMindfulness = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessFocus.id, code: 'beginners_mindfulness' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessFocus.id,
      code: 'beginners_mindfulness',
      label: 'Beginners & Mindfulness',
      sortOrder: 4,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'start_yoga_journey_beginner_friendly' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'start_yoga_journey_beginner_friendly',
      label: 'Start My Yoga Journey (Beginner-Friendly)',
      parentTagId: wfBeginnersMindfulness.id,
      sortOrder: 1,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'learn_basic_postures_safely' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'learn_basic_postures_safely',
      label: 'Learn Basic Postures Safely',
      parentTagId: wfBeginnersMindfulness.id,
      sortOrder: 2,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'simple_daily_stretches' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'simple_daily_stretches',
      label: 'Practice Simple Daily Stretches',
      parentTagId: wfBeginnersMindfulness.id,
      sortOrder: 3,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'pranayama_basics' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'pranayama_basics',
      label: 'Discover Breathing Techniques (Pranayama Basics)',
      parentTagId: wfBeginnersMindfulness.id,
      sortOrder: 4,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'guided_meditation' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'guided_meditation',
      label: 'Relax with Guided Meditation',
      parentTagId: wfBeginnersMindfulness.id,
      sortOrder: 5,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'short_easy_sessions_5_10_minutes' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'short_easy_sessions_5_10_minutes',
      label: 'Try Short, Easy Sessions (5â€“10 minutes)',
      parentTagId: wfBeginnersMindfulness.id,
      sortOrder: 6,
      isActive: true,
    },
  });

  // 5. Office Yoga
  const wfOfficeYoga = await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessFocus.id, code: 'office_yoga' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessFocus.id,
      code: 'office_yoga',
      label: 'Office Yoga',
      sortOrder: 5,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'relieve_neck_shoulder_stiffness' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'relieve_neck_shoulder_stiffness',
      label: 'Relieve Neck & Shoulder Stiffness',
      parentTagId: wfOfficeYoga.id,
      sortOrder: 1,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'improve_focus_breathing_breaks' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'improve_focus_breathing_breaks',
      label: 'Improve Focus with Breathing Breaks',
      parentTagId: wfOfficeYoga.id,
      sortOrder: 2,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'stretch_refresh_after_long_sitting' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'stretch_refresh_after_long_sitting',
      label: 'Stretch & Refresh After Long Sitting',
      parentTagId: wfOfficeYoga.id,
      sortOrder: 3,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'boost_afternoon_energy_10_minutes' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'boost_afternoon_energy_10_minutes',
      label: 'Boost Afternoon Energy in 10 Minutes',
      parentTagId: wfOfficeYoga.id,
      sortOrder: 4,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'reduce_eye_mental_fatigue' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'reduce_eye_mental_fatigue',
      label: 'Reduce Eye & Mental Fatigue',
      parentTagId: wfOfficeYoga.id,
      sortOrder: 5,
      isActive: true,
    },
  });

  await prisma.tag.upsert({
    where: { tagTypeId_code: { tagTypeId: tagTypeWellnessGoal.id, code: 'calm_anxiety_before_meetings' } },
    update: {},
    create: {
      tagTypeId: tagTypeWellnessGoal.id,
      code: 'calm_anxiety_before_meetings',
      label: 'Calm Anxiety Before Meetings',
      parentTagId: wfOfficeYoga.id,
      sortOrder: 6,
      isActive: true,
    },
  });

  console.log('âœ“ Wellness focus & goals seeded (5 focuses + 36 goals with sortOrder)');

  // ============================================
  // D) VIDEOS
  // ============================================
  console.log('ğŸ¥ Seeding videos...');

  const video1 = await prisma.video.upsert({
    where: { id: '00000000-0000-0000-0000-000000000001' },
    update: {},
    create: {
      id: '00000000-0000-0000-0000-000000000001',
      name: 'Gentle Morning Warm-Up',
      descriptionShort: 'Start your day with gentle stretches to wake up your body',
      primaryCategory: 'YOGA',
      durationSec: 360,
      level: 'BEGINNER',
      intensity: 'LOW',
      strengthDemand: 'VERY_LIGHT',
      accessLevel: 'FREE',
      cloudflareStreamUid: 'cfstream-warmup-001',
      thumbnailR2Key: 'thumbnails/warmup-001.jpg',
      status: 'ACTIVE',
      version: 1,
    },
  });

  const video2 = await prisma.video.upsert({
    where: { id: '00000000-0000-0000-0000-000000000002' },
    update: {},
    create: {
      id: '00000000-0000-0000-0000-000000000002',
      name: 'Lower Back Relief Flow',
      descriptionShort: 'Gentle yoga flow targeting lower back tension and pain',
      primaryCategory: 'YOGA',
      durationSec: 720,
      level: 'BEGINNER',
      intensity: 'LOW',
      strengthDemand: 'LIGHT',
      accessLevel: 'SUBSCRIPTION',
      requiredEntitlementKey: 'premium_access',
      cloudflareStreamUid: 'cfstream-backpain-001',
      thumbnailR2Key: 'thumbnails/backpain-001.jpg',
      status: 'ACTIVE',
      version: 1,
    },
  });

  const video3 = await prisma.video.upsert({
    where: { id: '00000000-0000-0000-0000-000000000003' },
    update: {},
    create: {
      id: '00000000-0000-0000-0000-000000000003',
      name: 'Deep Breathing for Stress',
      descriptionShort: 'Pranayama practice to calm the mind and reduce stress',
      primaryCategory: 'BREATHING',
      durationSec: 480,
      level: 'ALL_LEVELS',
      intensity: 'LOW',
      strengthDemand: 'VERY_LIGHT',
      accessLevel: 'FREE',
      cloudflareStreamUid: 'cfstream-breathing-001',
      thumbnailR2Key: 'thumbnails/breathing-001.jpg',
      status: 'ACTIVE',
      version: 1,
    },
  });

  const video4 = await prisma.video.upsert({
    where: { id: '00000000-0000-0000-0000-000000000004' },
    update: {},
    create: {
      id: '00000000-0000-0000-0000-000000000004',
      name: 'Evening Relaxation',
      descriptionShort: 'Guided meditation to release tension and prepare for rest',
      primaryCategory: 'MEDITATION',
      durationSec: 600,
      level: 'ALL_LEVELS',
      intensity: 'LOW',
      strengthDemand: 'VERY_LIGHT',
      accessLevel: 'SUBSCRIPTION',
      requiredEntitlementKey: 'premium_access',
      cloudflareStreamUid: 'cfstream-meditation-001',
      thumbnailR2Key: 'thumbnails/meditation-001.jpg',
      status: 'ACTIVE',
      version: 1,
    },
  });

  const video5 = await prisma.video.upsert({
    where: { id: '00000000-0000-0000-0000-000000000005' },
    update: {},
    create: {
      id: '00000000-0000-0000-0000-000000000005',
      name: 'Core Strengthening Practice',
      descriptionShort: 'Build core stability to support your back and posture',
      primaryCategory: 'YOGA',
      durationSec: 900,
      level: 'INTERMEDIATE',
      intensity: 'MEDIUM',
      strengthDemand: 'MODERATE',
      accessLevel: 'SUBSCRIPTION',
      requiredEntitlementKey: 'premium_access',
      cloudflareStreamUid: 'cfstream-core-001',
      thumbnailR2Key: 'thumbnails/core-001.jpg',
      status: 'ACTIVE',
      version: 1,
    },
  });

  const video6 = await prisma.video.upsert({
    where: { id: '00000000-0000-0000-0000-000000000006' },
    update: {},
    create: {
      id: '00000000-0000-0000-0000-000000000006',
      name: 'Spinal Mobility Flow',
      descriptionShort: 'Improve flexibility and range of motion in your spine',
      primaryCategory: 'YOGA',
      durationSec: 780,
      level: 'BEGINNER',
      intensity: 'MEDIUM',
      strengthDemand: 'LIGHT',
      accessLevel: 'FREE',
      cloudflareStreamUid: 'cfstream-spine-001',
      thumbnailR2Key: 'thumbnails/spine-001.jpg',
      status: 'ACTIVE',
      version: 1,
    },
  });

  console.log('âœ“ Videos created');

  // ============================================
  // VIDEO TAGS
  // ============================================
  console.log('ğŸ”— Linking video tags...');

  // Video 1 - Warm-Up
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video1.id, tagId: tagWarmUp.id } },
    update: {},
    create: { videoId: video1.id, tagId: tagWarmUp.id },
  });
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video1.id, tagId: tagBeginner.id } },
    update: {},
    create: { videoId: video1.id, tagId: tagBeginner.id },
  });
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video1.id, tagId: tagDuration5to7.id } },
    update: {},
    create: { videoId: video1.id, tagId: tagDuration5to7.id },
  });

  // Video 2 - Back Pain
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video2.id, tagId: tagBackPain.id } },
    update: {},
    create: { videoId: video2.id, tagId: tagBackPain.id },
  });
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video2.id, tagId: tagHealthSupportArea.id } },
    update: {},
    create: { videoId: video2.id, tagId: tagHealthSupportArea.id },
  });
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video2.id, tagId: tagDuration12to20.id } },
    update: {},
    create: { videoId: video2.id, tagId: tagDuration12to20.id },
  });
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video2.id, tagId: tagHatha.id } },
    update: {},
    create: { videoId: video2.id, tagId: tagHatha.id },
  });

  // Video 3 - Breathing
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video3.id, tagId: tagStressRelief.id } },
    update: {},
    create: { videoId: video3.id, tagId: tagStressRelief.id },
  });

  // Video 4 - Meditation
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video4.id, tagId: tagStressRelief.id } },
    update: {},
    create: { videoId: video4.id, tagId: tagStressRelief.id },
  });

  // Video 5 - Core
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video5.id, tagId: tagBackPain.id } },
    update: {},
    create: { videoId: video5.id, tagId: tagBackPain.id },
  });
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video5.id, tagId: tagHealthSupportArea.id } },
    update: {},
    create: { videoId: video5.id, tagId: tagHealthSupportArea.id },
  });

  // Video 6 - Spinal
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video6.id, tagId: tagBackPain.id } },
    update: {},
    create: { videoId: video6.id, tagId: tagBackPain.id },
  });
  await prisma.videoTag.upsert({
    where: { videoId_tagId: { videoId: video6.id, tagId: tagDuration12to20.id } },
    update: {},
    create: { videoId: video6.id, tagId: tagDuration12to20.id },
  });

  console.log('âœ“ Video tags linked');

  // ============================================
  // E) PROGRAM TEMPLATES
  // ============================================
  console.log('ğŸ“‹ Seeding program templates...');

  // Program 1: Back Pain Relief
  const program1 = await prisma.programTemplate.upsert({
    where: { id: '10000000-0000-0000-0000-000000000001' },
    update: {},
    create: {
      id: '10000000-0000-0000-0000-000000000001',
      title: 'Back Pain Relief Program',
      sanskritTitle: 'Pá¹›á¹£á¹­ha ÅšÅ«la NivÄraá¹‡a',
      subtitle: 'Gentle practice for a healthy spine',
      descriptionShort: 'A 3-day program designed to relieve back pain through targeted yoga flows',
      heroImageR2Key: 'programs/back-pain-hero.jpg',
      defaultDays: 3,
      defaultMinutesPerDay: 15,
      levelLabel: 'Beginner Friendly',
      accessLevel: 'SUBSCRIPTION',
      requiredEntitlementKey: 'premium_access',
      status: 'ACTIVE',
      version: 1,
    },
  });

  // Program 1 Sections
  await prisma.programTemplateSection.upsert({
    where: { id: '11000000-0000-0000-0000-000000000001' },
    update: {},
    create: {
      id: '11000000-0000-0000-0000-000000000001',
      programTemplateId: program1.id,
      type: 'BENEFIT',
      sortOrder: 1,
      text: 'Reduces lower back tension and pain',
    },
  });

  await prisma.programTemplateSection.upsert({
    where: { id: '11000000-0000-0000-0000-000000000002' },
    update: {},
    create: {
      id: '11000000-0000-0000-0000-000000000002',
      programTemplateId: program1.id,
      type: 'BENEFIT',
      sortOrder: 2,
      text: 'Improves spinal flexibility and posture',
    },
  });

  await prisma.programTemplateSection.upsert({
    where: { id: '11000000-0000-0000-0000-000000000003' },
    update: {},
    create: {
      id: '11000000-0000-0000-0000-000000000003',
      programTemplateId: program1.id,
      type: 'SAFETY_NOTE',
      sortOrder: 1,
      text: 'Consult your doctor if you have severe or chronic back pain',
    },
  });

  // Program 1 Days
  const p1day1 = await prisma.programDay.upsert({
    where: { programTemplateId_dayNumber: { programTemplateId: program1.id, dayNumber: 1 } },
    update: {},
    create: {
      programTemplateId: program1.id,
      dayNumber: 1,
      title: 'Gentle Introduction',
      intent: 'Warm up the body and assess your current state',
    },
  });

  const p1day2 = await prisma.programDay.upsert({
    where: { programTemplateId_dayNumber: { programTemplateId: program1.id, dayNumber: 2 } },
    update: {},
    create: {
      programTemplateId: program1.id,
      dayNumber: 2,
      title: 'Deepen the Practice',
      intent: 'Target deeper layers of tension in the back',
    },
  });

  const p1day3 = await prisma.programDay.upsert({
    where: { programTemplateId_dayNumber: { programTemplateId: program1.id, dayNumber: 3 } },
    update: {},
    create: {
      programTemplateId: program1.id,
      dayNumber: 3,
      title: 'Strengthen & Release',
      intent: 'Build core strength while releasing remaining tension',
    },
  });

  // Program 1 Day Items
  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p1day1.id, orderIndex: 1 } },
    update: {},
    create: {
      programDayId: p1day1.id,
      orderIndex: 1,
      videoId: video1.id,
      sequenceRole: 'warmup',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p1day1.id, orderIndex: 2 } },
    update: {},
    create: {
      programDayId: p1day1.id,
      orderIndex: 2,
      videoId: video2.id,
      sequenceRole: 'main',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p1day2.id, orderIndex: 1 } },
    update: {},
    create: {
      programDayId: p1day2.id,
      orderIndex: 1,
      videoId: video6.id,
      sequenceRole: 'main',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p1day2.id, orderIndex: 2 } },
    update: {},
    create: {
      programDayId: p1day2.id,
      orderIndex: 2,
      videoId: video3.id,
      sequenceRole: 'cooldown',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p1day3.id, orderIndex: 1 } },
    update: {},
    create: {
      programDayId: p1day3.id,
      orderIndex: 1,
      videoId: video1.id,
      sequenceRole: 'warmup',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p1day3.id, orderIndex: 2 } },
    update: {},
    create: {
      programDayId: p1day3.id,
      orderIndex: 2,
      videoId: video5.id,
      sequenceRole: 'main',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p1day3.id, orderIndex: 3 } },
    update: {},
    create: {
      programDayId: p1day3.id,
      orderIndex: 3,
      videoId: video4.id,
      sequenceRole: 'cooldown',
    },
  });

  // Program 1 Tags
  await prisma.programTemplateTag.upsert({
    where: { programTemplateId_tagId: { programTemplateId: program1.id, tagId: tagBackPain.id } },
    update: {},
    create: { programTemplateId: program1.id, tagId: tagBackPain.id },
  });

  await prisma.programTemplateTag.upsert({
    where: { programTemplateId_tagId: { programTemplateId: program1.id, tagId: tagHealthSupportArea.id } },
    update: {},
    create: { programTemplateId: program1.id, tagId: tagHealthSupportArea.id },
  });

  console.log('âœ“ Program 1: Back Pain Relief');

  // Program 2: Stress Relief
  const program2 = await prisma.programTemplate.upsert({
    where: { id: '10000000-0000-0000-0000-000000000002' },
    update: {},
    create: {
      id: '10000000-0000-0000-0000-000000000002',
      title: 'Stress Relief Journey',
      sanskritTitle: 'TanÄva Mukti YÄtrÄ',
      subtitle: 'Find calm in your daily life',
      descriptionShort: 'A 3-day program combining breath, movement, and meditation to reduce stress',
      heroImageR2Key: 'programs/stress-relief-hero.jpg',
      defaultDays: 3,
      defaultMinutesPerDay: 12,
      levelLabel: 'All Levels',
      accessLevel: 'SUBSCRIPTION',
      requiredEntitlementKey: 'premium_access',
      status: 'ACTIVE',
      version: 1,
    },
  });

  // Program 2 Sections
  await prisma.programTemplateSection.upsert({
    where: { id: '12000000-0000-0000-0000-000000000001' },
    update: {},
    create: {
      id: '12000000-0000-0000-0000-000000000001',
      programTemplateId: program2.id,
      type: 'BENEFIT',
      sortOrder: 1,
      text: 'Reduces anxiety and mental tension',
    },
  });

  await prisma.programTemplateSection.upsert({
    where: { id: '12000000-0000-0000-0000-000000000002' },
    update: {},
    create: {
      id: '12000000-0000-0000-0000-000000000002',
      programTemplateId: program2.id,
      type: 'BENEFIT',
      sortOrder: 2,
      text: 'Improves sleep quality and emotional balance',
    },
  });

  await prisma.programTemplateSection.upsert({
    where: { id: '12000000-0000-0000-0000-000000000003' },
    update: {},
    create: {
      id: '12000000-0000-0000-0000-000000000003',
      programTemplateId: program2.id,
      type: 'WHAT_YOU_NEED',
      sortOrder: 1,
      text: 'A quiet space where you can practice without interruption',
    },
  });

  // Program 2 Days
  const p2day1 = await prisma.programDay.upsert({
    where: { programTemplateId_dayNumber: { programTemplateId: program2.id, dayNumber: 1 } },
    update: {},
    create: {
      programTemplateId: program2.id,
      dayNumber: 1,
      title: 'Breathe & Release',
      intent: 'Learn foundational breathing techniques for stress relief',
    },
  });

  const p2day2 = await prisma.programDay.upsert({
    where: { programTemplateId_dayNumber: { programTemplateId: program2.id, dayNumber: 2 } },
    update: {},
    create: {
      programTemplateId: program2.id,
      dayNumber: 2,
      title: 'Move & Flow',
      intent: 'Release physical tension through gentle movement',
    },
  });

  const p2day3 = await prisma.programDay.upsert({
    where: { programTemplateId_dayNumber: { programTemplateId: program2.id, dayNumber: 3 } },
    update: {},
    create: {
      programTemplateId: program2.id,
      dayNumber: 3,
      title: 'Rest & Restore',
      intent: 'Deep relaxation to integrate the practice',
    },
  });

  // Program 2 Day Items
  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p2day1.id, orderIndex: 1 } },
    update: {},
    create: {
      programDayId: p2day1.id,
      orderIndex: 1,
      videoId: video3.id,
      sequenceRole: 'main',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p2day1.id, orderIndex: 2 } },
    update: {},
    create: {
      programDayId: p2day1.id,
      orderIndex: 2,
      videoId: video4.id,
      sequenceRole: 'cooldown',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p2day2.id, orderIndex: 1 } },
    update: {},
    create: {
      programDayId: p2day2.id,
      orderIndex: 1,
      videoId: video1.id,
      sequenceRole: 'warmup',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p2day2.id, orderIndex: 2 } },
    update: {},
    create: {
      programDayId: p2day2.id,
      orderIndex: 2,
      videoId: video6.id,
      sequenceRole: 'main',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p2day3.id, orderIndex: 1 } },
    update: {},
    create: {
      programDayId: p2day3.id,
      orderIndex: 1,
      videoId: video3.id,
      sequenceRole: 'main',
    },
  });

  await prisma.programDayItem.upsert({
    where: { programDayId_orderIndex: { programDayId: p2day3.id, orderIndex: 2 } },
    update: {},
    create: {
      programDayId: p2day3.id,
      orderIndex: 2,
      videoId: video4.id,
      sequenceRole: 'cooldown',
    },
  });

  // Program 2 Tags
  await prisma.programTemplateTag.upsert({
    where: { programTemplateId_tagId: { programTemplateId: program2.id, tagId: tagStressRelief.id } },
    update: {},
    create: { programTemplateId: program2.id, tagId: tagStressRelief.id },
  });

  console.log('âœ“ Program 2: Stress Relief Journey');

  console.log('âœ… Seed completed successfully!');
}

main()
  .then(async () => {
    await prisma.$disconnect();
  })
  .catch(async (e) => {
    console.error('âŒ Seed failed:', e);
    await prisma.$disconnect();
    process.exit(1);
  });
